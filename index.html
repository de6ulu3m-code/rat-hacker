<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RatOS: PENTHOUSE DEFENSE</title>
    <style>
        body {
            background: url('https://i.imgur.com/your-penthouse-bg.jpg') no-repeat center center / cover; /* –ó–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π —Ñ–æ–Ω –ø–µ–Ω—Ç—Ö–∞—É—Å–∞ */
            background-color: #333; /* –ó–∞–ø–∞—Å–Ω–æ–π —Ñ–æ–Ω */
            color: white; font-family: 'Press Start 2P', cursive; /* –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Google Fonts –¥–ª—è –ø–∏–∫—Å–µ–ª—å–Ω–æ–≥–æ —à—Ä–∏—Ñ—Ç–∞ */
            display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
            height: 100vh; margin: 0; overflow: hidden;
            cursor: url('https://i.imgur.com/your-cursor.png'), auto; /* –ö–∞—Å—Ç–æ–º–Ω—ã–π –∫—É—Ä—Å–æ—Ä, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏—Ü–µ–ª */
            user-select: none; -webkit-user-select: none;
        }

        @font-face {
            font-family: 'Press Start 2P';
            src: url('https://fonts.gstatic.com/s/pressstart2p/v15/PFBpRgpz6ZHBtTFMylokdf-Ffjs.woff2') format('woff2');
            /* –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–∏–∫—Å–µ–ª—å–Ω—ã–π —à—Ä–∏—Ñ—Ç, –∏–Ω–∞—á–µ —É–¥–∞–ª–∏ */
        }

        #game-area {
            width: 90vw; max-width: 900px; height: 70vh;
            background: rgba(0, 0, 0, 0.7); border: 4px solid #ffcc00;
            position: relative; overflow: hidden;
            box-shadow: 0 0 25px rgba(255, 204, 0, 0.5);
        }

        #hud {
            width: 90vw; max-width: 900px; padding: 10px; background: #222;
            display: flex; justify-content: space-between; align-items: center;
            border: 4px solid #ffcc00; border-top: none; font-size: 1.2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .stat-item { display: flex; align-items: center; gap: 5px; color: #ffcc00; }

        #start-screen, #game-over-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.9); display: flex; flex-direction: column;
            align-items: center; justify-content: center; z-index: 100;
            text-align: center;
        }
        #start-screen button, #game-over-screen button {
            background: #ffcc00; color: #333; border: none; padding: 15px 30px;
            font-size: 1.5rem; cursor: pointer; border-radius: 5px; margin-top: 20px;
        }
        
        .pigeon {
            position: absolute; font-size: 40px; transform: scaleX(-1); /* –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –≥–æ–ª—É–±—è */
            pointer-events: auto; /* –ß—Ç–æ–±—ã –ø–æ –Ω–µ–º—É –º–æ–∂–Ω–æ –±—ã–ª–æ –∫–ª–∏–∫–∞—Ç—å */
            z-index: 5; /* –ù–∞–¥ —Ñ–æ–Ω–æ–º, –Ω–æ –ø–æ–¥ HUD */
            transition: opacity 0.2s; /* –î–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–º–µ—Ä—Ç–∏ */
        }
        .pigeon.dying { opacity: 0; } /* –ò—Å—á–µ–∑–∞–µ—Ç –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏ */

        .back-btn { margin-top: 30px; color: #aaa; text-decoration: none; font-size: 0.9rem; }
    </style>
</head>
<body>

<div id="game-area">
    <div id="start-screen">
        <h1>PENTHOUSE DEFENSE</h1>
        <p>–ó–∞—â–∏—Ç–∏ —Å–≤–æ–π —Å—ã—Ä –æ—Ç –Ω–∞–≥–ª—ã—Ö –≥–æ–ª—É–±–µ–π!</p>
        <button onclick="startGame()">–ù–ê–ß–ê–¢–¨ –ó–ê–©–ò–¢–£</button>
    </div>

    <div id="game-over-screen" style="display: none;">
        <h1>–ö–û–ù–ï–¶ –ò–ì–†–´</h1>
        <p id="final-score">–¢–≤–æ–π —Å—ã—Ä –±—ã–ª —É–∫—Ä–∞–¥–µ–Ω! –£–±–∏—Ç–æ –≥–æ–ª—É–±–µ–π: 0</p>
        <button onclick="location.reload()">–ù–ê–ß–ê–¢–¨ –ó–ê–ù–û–í–û</button>
        <button onclick="location.href='https://de6ulu3m-code.github.io/ratpage/'" style="background: #555;">–í–´–ô–¢–ò –ò–ó –ò–ì–†–´</button>
    </div>
</div>

<div id="hud">
    <div class="stat-item">–°—ã—Ä: <span id="cheese-val">0</span> üßÄ</div>
    <div class="stat-item">–í–æ–ª–Ω–∞: <span id="wave-val">1</span></div>
    <div class="stat-item">–£–±–∏—Ç–æ: <span id="kills-val">0</span></div>
    <div class="stat-item">–ó–¥–æ—Ä–æ–≤—å–µ –±–∞–∑—ã: <span id="base-health-val">100</span> ‚ù§Ô∏è</div>
</div>

<a href="https://de6ulu3m-code.github.io/ratpage/" class="back-btn">–í—ã–∫–ª—é—á–∏—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä</a>

<script>
    let cheese = parseInt(localStorage.getItem('ratCheese')) || 0;
    let wave = 0;
    let kills = 0;
    let baseHealth = 100;
    let gameRunning = false;
    let pigeonsOnScreen = []; // –ú–∞—Å—Å–∏–≤ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≥–æ–ª—É–±–µ–π

    function updateHUD() {
        document.getElementById('cheese-val').innerText = cheese;
        document.getElementById('wave-val').innerText = wave;
        document.getElementById('kills-val').innerText = kills;
        document.getElementById('base-health-val').innerText = baseHealth;
        localStorage.setItem('ratCheese', cheese);
    }

    function spawnPigeon() {
        if (!gameRunning) return;

        const gameArea = document.getElementById('game-area');
        const pigeon = document.createElement('div');
        pigeon.className = 'pigeon';
        pigeon.innerText = 'üê¶'; // –ò–∫–æ–Ω–∫–∞ –≥–æ–ª—É–±—è
        pigeon.style.left = -50 + 'px'; // –ù–∞—á–∏–Ω–∞–µ–º –∑–∞ –ª–µ–≤–æ–π –≥—Ä–∞–Ω–∏—Ü–µ–π
        pigeon.style.top = Math.random() * (gameArea.offsetHeight - 50) + 'px';
        gameArea.appendChild(pigeon);
        pigeonsOnScreen.push(pigeon);

        let speed = 1 + (wave * 0.2); // –ì–æ–ª—É–±–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ —Å –∫–∞–∂–¥–æ–π –≤–æ–ª–Ω–æ–π
        let currentPos = -50;
        const moveInterval = setInterval(() => {
            if (!gameRunning) {
                clearInterval(moveInterval);
                return;
            }

            currentPos += speed;
            pigeon.style.left = currentPos + 'px';

            if (currentPos > gameArea.offsetWidth - 50) { // –ì–æ–ª—É–±—å –¥–æ—à–µ–ª –¥–æ –∫–æ–Ω—Ü–∞
                clearInterval(moveInterval);
                pigeon.remove();
                baseHealth -= 10; // –¢–µ—Ä—è–µ–º –∑–¥–æ—Ä–æ–≤—å–µ –±–∞–∑—ã
                if (baseHealth <= 0) {
                    gameOver();
                }
                updateHUD();
                pigeonsOnScreen = pigeonsOnScreen.filter(p => p !== pigeon); // –£–¥–∞–ª—è–µ–º –∏–∑ –º–∞—Å—Å–∏–≤–∞
            }
        }, 30);

        pigeon.onclick = () => {
            if (!gameRunning) return;
            clearInterval(moveInterval);
            pigeon.classList.add('dying'); // –ê–Ω–∏–º–∞—Ü–∏—è –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
            setTimeout(() => pigeon.remove(), 200); // –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            
            kills++;
            cheese += 5 + (wave * 1); // –ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å—ã—Ä
            updateHUD();
            pigeonsOnScreen = pigeonsOnScreen.filter(p => p !== pigeon);
        };
    }

    function startWave() {
        if (!gameRunning) return;
        wave++;
        updateHUD();

        let pigeonsToSpawn = 5 + (wave * 2); // –ë–æ–ª—å—à–µ –≥–æ–ª—É–±–µ–π —Å –∫–∞–∂–¥–æ–π –≤–æ–ª–Ω–æ–π
        let spawnCount = 0;
        const spawnInterval = setInterval(() => {
            if (spawnCount < pigeonsToSpawn) {
                spawnPigeon();
                spawnCount++;
            } else {
                clearInterval(spawnInterval);
                // –ñ–¥–µ–º, –ø–æ–∫–∞ –≤—Å–µ –≥–æ–ª—É–±–∏ —Ç–µ–∫—É—â–µ–π –≤–æ–ª–Ω—ã –Ω–µ –±—É–¥—É—Ç —É–±–∏—Ç—ã/–ø—Ä–æ–π–¥—É—Ç
                setTimeout(() => {
                    if (pigeonsOnScreen.length === 0 && gameRunning) {
                        startWave(); // –ù–∞—á–∏–Ω–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é –≤–æ–ª–Ω—É
                    }
                }, 5000); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥, –Ω–µ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –ª–∏ –≤–æ–ª–Ω–∞
            }
        }, 1000 - (wave * 50)); // –ì–æ–ª—É–±–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ
    }

    function startGame() {
        document.getElementById('start-screen').style.display = 'none';
        gameRunning = true;
        baseHealth = 100;
        wave = 0;
        kills = 0;
        
        // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã—Ö –≥–æ–ª—É–±–µ–π, –µ—Å–ª–∏ –±—ã–ª–∏
        pigeonsOnScreen.forEach(p => p.remove());
        pigeonsOnScreen = [];

        updateHUD();
        startWave();
    }

    function gameOver() {
        gameRunning = false;
        document.getElementById('final-score').innerText = `–¢–≤–æ–π —Å—ã—Ä –±—ã–ª —É–∫—Ä–∞–¥–µ–Ω! –£–±–∏—Ç–æ –≥–æ–ª—É–±–µ–π: ${kills}`;
        document.getElementById('game-over-screen').style.display = 'flex';
        // –£–±–∏–≤–∞–µ–º –≤—Å–µ—Ö –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –≥–æ–ª—É–±–µ–π
        pigeonsOnScreen.forEach(p => p.remove());
        pigeonsOnScreen = [];
    }

    updateHUD(); // –û–±–Ω–æ–≤–ª—è–µ–º HUD –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
</script>
</body>
</html>
